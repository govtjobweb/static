(()=>{"use strict";var e={252:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,a;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!==n--;)if(!e(t[n],r[n]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;for(n of t.entries())if(!e(n[1],r.get(n[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((o=t.length)!=r.length)return!1;for(n=o;0!==n--;)if(t[n]!==r[n])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!==n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!==n--;){var l=a[n];if(!e(t[l],r[l]))return!1}return!0}return t!=t&&r!=r}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const o=wp.blocks,n=lodash,a=wp.i18n,l=wp.data,s=wp.blockEditor,i=wp.components,u=React,p=wp.element;var c=r(252),_=r.n(c);const m=wp.compose,h=wp.apiFetch;var b=r.n(h);const f=wp.url,y={};function d({className:e}){return(0,u.createElement)(i.Placeholder,{className:e},(0,a.__)("Block rendered as empty."))}function g({response:e,className:t}){const r=(0,a.sprintf)((0,a.__)("Error loading block: %s"),e.errorMsg);return(0,u.createElement)(i.Placeholder,{className:t},r)}function w({children:e,showLoader:t}){return(0,u.createElement)("div",{style:{position:"relative"}},t&&(0,u.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"}},(0,u.createElement)(i.Spinner,null)),(0,u.createElement)("div",{style:{opacity:t?"0.3":1}},e))}function k(e){const{attributes:t,block:r,className:n,httpMethod:a="GET",urlQueryArgs:l,skipBlockSupportAttributes:s=!1,EmptyResponsePlaceholder:i=d,ErrorResponsePlaceholder:c=g,LoadingResponsePlaceholder:h=w}=e,k=(0,p.useRef)(!0),[S,v]=(0,p.useState)(!1),E=(0,p.useRef)(),[C,x]=(0,p.useState)(null),A=(0,m.usePrevious)(e),[T,P]=(0,p.useState)(!1);function M(){var e,n;if(!k.current)return;P(!0);let i=t&&(0,o.__experimentalSanitizeBlockAttributes)(r,t);s&&(i=function(e){const{backgroundColor:t,borderColor:r,fontFamily:o,fontSize:n,gradient:a,textColor:l,className:s,...i}=e,{border:u,color:p,elements:c,spacing:_,typography:m,...h}=e?.style||y;return{...i,style:h}}(i));const u="POST"===a,p=u?null:null!==(e=i)&&void 0!==e?e:null,c=function(e,t=null,r={}){return(0,f.addQueryArgs)(`/wp/v2/block-renderer/${e}`,{context:"edit",...null!==t?{attributes:t}:{},...r})}(r,p,l),_=u?{attributes:null!==(n=i)&&void 0!==n?n:null}:null,m=E.current=b()({path:c,data:_,method:u?"POST":"GET"}).then(e=>{k.current&&m===E.current&&e&&x(e.rendered)}).catch(e=>{k.current&&m===E.current&&x({error:!0,errorMsg:e.message})}).finally(()=>{k.current&&m===E.current&&P(!1)});return m}const O=(0,m.useDebounce)(M,500);(0,p.useEffect)(()=>()=>{k.current=!1},[]),(0,p.useEffect)(()=>{void 0===A?M():_()(A,e)||O()}),(0,p.useEffect)(()=>{if(!T)return;const e=setTimeout(()=>{v(!0)},1e3);return()=>clearTimeout(e)},[T]);const R=!!C,z=""===C,D=C?.error;return T?(0,u.createElement)(h,{...e,showLoader:S},R&&(0,u.createElement)(p.RawHTML,{className:n},C)):z||!R?(0,u.createElement)(i,{...e}):D?(0,u.createElement)(c,{response:C,...e}):(0,u.createElement)(p.RawHTML,{className:n},C)}const S={},v=(0,l.withSelect)(e=>{const t=e("core/editor");if(t){const e=t.getCurrentPostId();if(e&&"number"==typeof e)return{currentPostId:e}}return S})(({urlQueryArgs:e=S,currentPostId:t,...r})=>{const o=(0,p.useMemo)(()=>t?{post_id:t,...e}:e,[t,e]);return(0,u.createElement)(k,{urlQueryArgs:o,...r})});function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e,t){var r=[];return(0,n.forEach)(e,function(e,o){"boolean"===e.type&&r.push(wp.element.createElement(i.ToggleControl,{label:e.label,checked:t.attributes[o],onChange:function(e){return t.setAttributes(C({},o,e))}})),"string"===e.type&&r.push(wp.element.createElement(i.TextControl,{label:e.label,value:t.attributes[o],onChange:function(e){return t.setAttributes(C({},o,e))},__next40pxDefaultSize:!0})),"select"===e.type&&r.push(wp.element.createElement(i.SelectControl,{label:e.label,value:t.attributes[o],options:e.options,onChange:function(e){return t.setAttributes(C({},o,e))},__next40pxDefaultSize:!0})),"range"===e.type&&r.push(wp.element.createElement(i.RangeControl,{label:e.label,value:t.attributes[o],onChange:function(e){return t.setAttributes(C({},o,e))},min:e.min,max:e.max}))}),r},A=function(e){var t={show_company_name:{label:(0,a.__)("Show Company Name","rank-math-pro"),type:"boolean"},show_company_address:{label:(0,a.__)("Show Company Address","rank-math-pro"),type:"boolean"},show_on_one_line:{label:(0,a.__)("Show address on one line","rank-math-pro"),type:"boolean"},show_state:{label:(0,a.__)("Show State","rank-math-pro"),type:"boolean"},show_country:{label:(0,a.__)("Show Country","rank-math-pro"),type:"boolean"},show_telephone:{label:(0,a.__)("Show Primary number","rank-math-pro"),type:"boolean"},show_secondary_number:{label:(0,a.__)("Show Secondary number","rank-math-pro"),type:"boolean"},show_fax:{label:(0,a.__)("Show FAX number","rank-math-pro"),type:"boolean"},show_email:{label:(0,a.__)("Show Email","rank-math-pro"),type:"boolean"},show_url:{label:(0,a.__)("Show Business URL","rank-math-pro"),type:"boolean"},show_logo:{label:(0,a.__)("Show Logo","rank-math-pro"),type:"boolean"},show_vat_id:{label:(0,a.__)("Show VAT number","rank-math-pro"),type:"boolean"},show_tax_id:{label:(0,a.__)("Show TAX ID","rank-math-pro"),type:"boolean"},show_coc_id:{label:(0,a.__)("Show COC number","rank-math-pro"),type:"boolean"},show_pricerange:{label:(0,a.__)("Show Price Indication","rank-math-pro"),type:"boolean"}};return"address"===e.attributes.type&&delete t.show_company_address,x(t,e)},T=function(e){var t=[],r=e.attributes.type;if("address"===r&&t.push(wp.element.createElement(i.ToggleControl,{label:(0,a.__)("Show Opening Hours","rank-math-pro"),checked:e.attributes.show_opening_hours,onChange:function(t){return e.setAttributes({show_opening_hours:t})}})),"opening-hours"===r||e.attributes.show_opening_hours){var o=e.attributes.show_days.split(",");(0,n.forEach)(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],function(r){t.push(wp.element.createElement(i.ToggleControl,{label:(0,a.sprintf)((0,a.__)("Show %s","rank-math-pro"),r),checked:o.includes(r),onChange:function(){var t=o.indexOf(r);t>-1?o.splice(t,1):o.push(r),e.setAttributes({show_days:o.toString()})}}))}),t.push(wp.element.createElement(i.ToggleControl,{label:(0,a.__)("Hide Closed Days","rank-math-pro"),checked:e.attributes.hide_closed_days,onChange:function(t){return e.setAttributes({hide_closed_days:t})}})),t.push(wp.element.createElement(i.ToggleControl,{label:(0,a.__)("Show open now label after opening hour for current day","rank-math-pro"),checked:e.attributes.show_opening_now_label,onChange:function(t){return e.setAttributes({show_opening_now_label:t})}})),e.attributes.show_opening_now_label&&t.push(wp.element.createElement(i.TextControl,{label:(0,a.__)("Show open now label after opening hour for current day","rank-math-pro"),value:e.attributes.opening_hours_note,onChange:function(t){return e.setAttributes({opening_hours_note:t})},__next40pxDefaultSize:!0}))}return t},P=function(e){var t=[],r="store-locator"===e.attributes.type;if(r&&t.push(wp.element.createElement(i.ToggleControl,{label:(0,a.__)("Show Map","rank-math-pro"),checked:e.attributes.show_map,onChange:function(t){return e.setAttributes({show_map:t})}})),r&&!e.attributes.show_map)return t;var o={map_style:{label:(0,a.__)("Map Type","rank-math-pro"),type:"select",options:[{value:"roadmap",label:(0,a.__)("Roadmap","rank-math-pro")},{value:"hybrid",label:(0,a.__)("Hybrid","rank-math-pro")},{value:"satellite",label:(0,a.__)("Satellite","rank-math-pro")},{value:"terrain",label:(0,a.__)("Terrain","rank-math-pro")}]},map_width:{label:(0,a.__)("Map Width","rank-math-pro"),type:"string"},map_height:{label:(0,a.__)("Map Height","rank-math-pro"),type:"string"},show_category_filter:{label:(0,a.__)("Show Category filter","rank-math-pro"),type:"boolean"},zoom_level:{label:(0,a.__)("Zoom Level","rank-math-pro"),type:"range",min:-1,max:19},allow_zoom:{label:(0,a.__)("Allow Zoom","rank-math-pro"),type:"boolean"},allow_scrolling:{label:(0,a.__)("Allow Zoom by scroll","rank-math-pro"),type:"boolean"},allow_dragging:{label:(0,a.__)("Allow Dragging","rank-math-pro"),type:"boolean"},show_marker_clustering:{label:(0,a.__)("Show Marker Clustering","rank-math-pro"),type:"boolean"},show_infowindow:{label:(0,a.__)("Show InfoWindow","rank-math-pro"),type:"boolean"},show_route_planner:{label:(0,a.__)("Show Route Planner","rank-math-pro"),type:"boolean"},route_label:{label:(0,a.__)("Route Label","rank-math-pro"),type:"string"}};return r||(delete o.show_route_planner,delete o.route_label),t.concat(x(o,e))},M=function(e,t){var r=(0,a.__)("Address Settings","rank-math-pro");return"getHoursSettings"===e?r=(0,a.__)("Opening Hours Settings","rank-math-pro"):"getMapSettings"===e&&(r=(0,a.__)("Map Settings","rank-math-pro")),wp.element.createElement(i.PanelBody,{title:r},"getHoursSettings"===e&&T(t),"getAddressSettings"===e&&A(t),"getMapSettings"===e&&P(t))};const O=(0,l.withSelect)(function(e){var t=e("core").getEntityRecords("postType","rank_math_locations",{per_page:-1}),r=[];t&&(r.push({value:0,label:(0,a.__)("All Locations","rank-math-pro")}),t.forEach(function(e){r.push({value:e.id,label:e.title.rendered})}));var o=e("core").getEntityRecords("taxonomy","rank_math_location_category",{per_page:-1}),n=[];return o&&o.forEach(function(e){n.push({value:e.id,label:e.name})}),{locationsData:r,termsData:n}})(function(e){var t=(0,s.useBlockProps)(),r=e.className,o=e.setAttributes,n=e.attributes,l=e.locationsData,u=e.termsData,p=rankMath.localBusiness;return n.limit||o({limit:p.limit}),n.map_style||o({map_style:p.map_style}),n.route_label||o({route_label:p.route_label}),wp.element.createElement("div",t,wp.element.createElement("div",{id:"rank-math-local",className:"rank-math-block "+r},wp.element.createElement(s.InspectorControls,{key:"inspector"},wp.element.createElement(i.PanelBody,{title:(0,a.__)("Settings","rank-math-pro"),initialOpen:"true"},wp.element.createElement(i.SelectControl,{label:(0,a.__)("Type","rank-math-pro"),value:n.type,options:[{value:"address",label:(0,a.__)("Address","rank-math-pro")},{value:"opening-hours",label:(0,a.__)("Opening Hours","rank-math-pro")},{value:"map",label:(0,a.__)("Map","rank-math-pro")},{value:"store-locator",label:(0,a.__)("Store Locator","rank-math-pro")}],onChange:function(e){return o({type:e})},__next40pxDefaultSize:!0}),"store-locator"!==n.type&&wp.element.createElement(i.SelectControl,{label:(0,a.__)("Locations","rank-math-pro"),value:n.locations,options:l,onChange:function(e){return o({locations:e})},__next40pxDefaultSize:!0}),"store-locator"!==n.type&&wp.element.createElement(i.SelectControl,{label:(0,a.__)("Location Categories","rank-math-pro"),multiple:!0,value:n.terms,options:u,onChange:function(e){return o({terms:e})},__next40pxDefaultSize:!0}),wp.element.createElement(i.TextControl,{type:"number",label:(0,a.__)("Maximum number of locations to show","rank-math-pro"),value:n.limit,onChange:function(t){return e.setAttributes({limit:t})},__next40pxDefaultSize:!0}),"address"===n.type&&A(e),"opening-hours"===n.type&&T(e),"map"===n.type&&P(e),"store-locator"===n.type&&function(e){var t={show_radius:{label:(0,a.__)("Show radius","rank-math-pro"),type:"boolean"},search_radius:{label:(0,a.__)("Search Locations within the radius","rank-math-pro"),type:"range",min:5,max:1e3},show_category_filter:{label:(0,a.__)("Add dropdown to filter results by category","rank-math-pro"),type:"boolean"},show_nearest_location:{label:(0,a.__)("Show nearest location if none is found within radius","rank-math-pro"),type:"boolean"}};return x(t,e)}(e)),"address"===n.type&&M("getHoursSettings",e),("map"===n.type||"store-locator"===n.type)&&M("getAddressSettings",e),"store-locator"===n.type&&M("getMapSettings",e)),function(e){return"map"===e.type?wp.element.createElement("img",{src:rankMath.previewImage,alt:(0,a.__)("Preview Image","rank-math-pro")}):wp.element.createElement(v,{block:"rank-math/local-business",attributes:e})}(n)))});(0,o.registerBlockType)("rank-math/local-business",{edit:O})})();